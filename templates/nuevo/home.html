{% extends 'nuevo/base.html' %}
{% block title %}{{ hotel.name|default:"Hotel" }} · Reserva online{% endblock %}

{% block content %}
<section class="hero">
  <div class="container hero__grid">
    <div>
      <p class="badge badge--neutral">Hospedaje flexible · Sin cargos ocultos</p>
      <h1 class="hero__title">Tu próxima estadía en {{ hotel.name|default:"nuestro hotel" }}</h1>
      <p class="hero__lead">Busca disponibilidad, compara opciones y confirma al instante con una experiencia clara y accesible.</p>
      <div class="steps">
        <span class="step step--active">1. Busca</span>
        <span class="step">2. Elige</span>
        <span class="step">3. Confirma</span>
      </div>
    </div>
    <div>
      <div class="search-card">
        <form method="get" action="{% url 'booking_step1' %}">
          <div class="grid grid--cols-3">
            <div class="field">
              <label for="check_in">Check-in</label>
              <input id="check_in" name="check_in" type="date" class="input" required>
            </div>
            <div class="field">
              <label for="check_out">Check-out</label>
              <input id="check_out" name="check_out" type="date" class="input" required>
            </div>
            <div class="field">
              <label for="guests">Huéspedes</label>
              <input id="guests" name="guests" type="number" min="1" class="input" value="2" required>
            </div>
          </div>
          <div style="margin-top: var(--spacing-3); display:flex; gap:var(--spacing-2); flex-wrap:wrap;">
            <button type="submit" class="btn btn--primary"><i class="fa-solid fa-magnifying-glass"></i> Buscar</button>
            <a href="{% url 'client_rooms_hotel' hotel.slug %}" class="btn btn--secondary"><i class="fa-solid fa-bed"></i> Ver habitaciones</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<section class="container" style="padding: var(--spacing-5) var(--spacing-3) 0;">
  <header style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:var(--spacing-2);">
    <div>
      <p class="badge badge--neutral">Recomendadas</p>
      <h2 style="margin:0;">Habitaciones destacadas</h2>
      <p class="card__meta">Selección curada por disponibilidad y mejores reseñas.</p>
    </div>
    <a href="{% url 'client_rooms_hotel' hotel.slug %}" class="btn btn--secondary">Ver todas</a>
  </header>
  <div class="grid grid--cols-3" style="margin-top: var(--spacing-3);">
    {% for room in featured_rooms %}
    <article class="card">
      <div class="card__media">
        <img src="{{ room.main_image }}" alt="Habitación {{ room.number }}">
        <span class="badge badge--success" style="position:absolute; top:12px; right:12px;">Disponible</span>
      </div>
      <div class="card__body">
        <div style="display:flex; justify-content:space-between; align-items:flex-start; gap:var(--spacing-2);">
          <div>
            <h3 class="card__title">{{ room.get_type_display }}</h3>
            <p class="card__meta">Hab. {{ room.number }} · Capacidad {{ room.capacity }}</p>
          </div>
          <div class="price"><span>$</span>{{ room.price }}<small>/noche</small></div>
        </div>
        <p class="card__meta">{{ room.description|truncatewords:20 }}</p>
        <div class="room-actions">
          <a href="{% url 'client_room_detail_hotel' hotel.slug room.id %}" class="btn btn--secondary">Detalles</a>
          <a href="{% url 'client_booking_room_hotel' hotel.slug room.id %}" class="btn btn--primary">Reservar</a>
        </div>
      </div>
    </article>
    {% empty %}
    <div class="alert">No hay habitaciones destacadas cargadas.</div>
    {% endfor %}
  </div>
</section>
{% endblock %}
